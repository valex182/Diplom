# План автоматизации web-сервиса покупки тура
**Перечень сценариев**

Под валидными или корректными данными при заполнении полей ввода приложения понимается:

+ *Номер карты:* 16 цифровых символов, в формате **** **** **** ****
+ *Месяц:* 01-12, но не ранее текущего месяца в случае, если указан текущий год
+ *Год:* последние две цифры года, не ранее текущего года и не более 5ти лет от текущего года
+ *Владелец:* буквенные символы латинского алфавита
+ *CVC:* 3 цифровых символа.

**Карты, представленные для тестирования (файл data.json):**

+ 4444 4444 4444 4441, status APPROVED
+ 4444 4444 4444 4442, status DECLINED

## Тестируемые Базы данных:

- MySql
- PostgreSQL

## Позитивные сценарии

**1. Покупка тура на вкладке "Купить" с главной страницы сервиса**

***1.1. Оплата дебетовой картой со статусом APPROVED.***

Шаги по воспроизведению:

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить"
3. Заполнить все поля валидными данными карты с достаточным количеством средств на счете (например, Номер карты - 4444444444444441, Месяц - 11, Год - 24, Владелец - Sidorov Ivan, CVC/CVV - 111)
4. Нажать кнопку "Продолжить"

*Ожидаемый результат:* В правом верхнем углу сообщение "Успешно Операция одобрена банком"


***1.2. Отказ в покупке при оплате картой со статусом DECLINED.***

Шаги по воспроизведению:

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить"
3. Заполнить все поля валидными данными карты с недостаточным количеством средств на счете (например, Номер карты - 4444444444444442, Месяц - 11, Год - 24, Владелец - Sidorov Ivan, CVC/CVV - 111)
4. Нажать кнопку "Продолжить

*Ожидаемый результат:* В правом верхнем углу появляется сообщение "Ошибка! Банк отказал в проведении операции"


**2. Покупка тура на вкладке "Купить в кредит" с главной страницы сервиса.**

***2.1. Успешная покупка в кредит при оплате картой со статусом APPROVED***

Шаги по воспроизведению:

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить в кредит"
3. Заполнить все поля валидными данными карты с достаточным кредитным лимитом (например, Номер карты - 4444444444444441, Месяц - 11, Год - 24, Владелец - Sidorov Ivan, CVC/CVV - 111)
4. Нажать кнопку "Продолжить

*Ожидаемый результат:* В правом верхнем углу появляется сообщение "Успешно Операция одобрена банком"


***2.2. Отказ в покупке в кредит при оплате картой со статусом DECLINED***

Шаги по воспроизведению:

1. Открыть главную страницу сервиса http://localhost:8080/
2. Нажать кнопку "Купить в кредит"
3. Заполнить все поля валидными данными карты с недостаточным кредитным лимитом (например, Номер карты - 4444444444444442,Месяц - 11, Год - 24, Владелец - Sidorov Ivan, CVC/CVV - 111)
4. Нажать кнопку "Продолжить"

*Ожидаемый результат:* В правом верхнем углу появляется сообщение "Ошибка! Банк отказал в проведении операции"


## Негативные сценарии

**Передусловия**
Открыть главную страницу сервиса http://localhost:8080/

**1. Отправка пустой формы покупки тура, оплата по дебетовой карте**

Шаги по воспроизведению:
1. Нажать кнопку "Купить"
2. Все поля формы оставить не заполненными
3. Нажать кнопку "Продолжить"

*Ожидаемый результат:* Все поля подсвечены красным цветом, сообщения об ошибке: «Неверный формат», «Поле обязательно для заполнения».

**2. Отправка пустой формы покупки тура, оплата по кредитной карте**

Шаги по воспроизведению:
1. Нажать кнопку "Купить в кредит"
2. Все поля формы оставить не заполненными
3. Нажать кнопку "Продолжить"

*Ожидаемый результат:* Все поля подсвечены красным цветом, сообщения об ошибке: «Неверный формат», «Поле обязательно для заполнения».

**3. Оплата по дебетовой карте с истекшим сроком действия (месяц, предшествующий текущему)**

Шаги по воспроизведению:
1. Нажать кнопку "Купить"
2. В поле номер карты ввести номер карты 16 цифр
3. В поле месяц ввести месяц, предшествующий текущему
4. В поле год ввести 2 последние цифры текущего года
5. Поле "Владелец" заполнить латиницей валидным именем и фамилией
6. В поле cvc/cvv ввести любое значение из 3 чисел
7. Нажать кнопку "Продолжить"

*Ожидаемый результат:* Поле "Месяц" подсвечено красным, сообщение об ошибке "Неверно указан срок действия карты".

**4. Оплата по кредитной карте с истекшим сроком действия (месяц, предшествующий текущему)**

Шаги по воспроизведению:
1. Нажать кнопку "Купить в кредит"
2. В поле номер карты ввести номер карты 16 цифр
3. В поле месяц ввести месяц, предшествующий текущему
4. В поле год ввести 2 последние цифры текущего года
5. Поле "Владелец" заполнить латиницей валидным именем и фамилией
6. В поле cvc/cvv ввести любое значение из 3 чисел
7. Нажать кнопку "Продолжить"

*Ожидаемый результат:* Поле "Месяц" подсвечено красным, сообщение об ошибке "Неверно указан срок действия карты".

**5. Оплата по дебетовой карте с истекшим сроком действия ( год ранее текущего)**

Шаги по воспроизведению:
1. Нажать кнопку "Купить"
2. В поле номер карты ввести номер карты состоящий из 16 цифр
3. В поле месяц ввести любое значение от 01 до 12
4. В поле год ввести год ранее текущего
5. Поле "Владелец" заполнить латиницей валидным именем и фамилией
6. В поле cvc/cvv ввести любое значение из 3 чисел
7. Нажать кнопку "Продолжить"

*Ожидаемый результат:* Поле "Год" подсвечено красным, сообщение об ошибке "Истёк срок действия карты".

**6. Оплата по кредитной карте с истекшим сроком действия (введен год ранее текущего)**

Шаги по воспроизведению:
1. Нажать кнопку "Купить в кредит"
2. В поле номер карты ввести номер карты состоящий из 16 цифр
3. В поле месяц ввести любое значение от 01 до 12
4. В поле год ввести год ранее текущего
5. Поле "Владелец" заполнить латиницей валидным именем и фамилией
6. В поле cvc/cvv ввести любое значение из 3 чисел
7. Нажать кнопку "Продолжить"

*Ожидаемый результат.* Поле "Год" подсвечено красным, сообщение об ошибке "Истёк срок действия карты".

**7. Валидация поля "Номер карты":**

Шаги по воспроизведению:
1. Поля формы "месяц", "год", "Владелец", "cvc" заполняем валидными данными.
2. пустое поле, ввод букв
3. ввод специальных символов (=,$,:  и т.д.)
4. ввод менее 16 цифр
5. ввод более 16 цифр
6. ввод только пробелов

*Ожидаемый результат:* Поле «Номер карты» подсвечивается красным цветом, сообщение об ошибке: «Неверный формат». Ввод некорректных символов недоступен.

**8. Валидация поля "Месяц"**

Шаги по воспроизведению:
1. Поля формы "номер карты", "год", "Владелец", "cvc" заполняем валидными данными
2. пустое поле
3. ввод букв
4. ввод некорректных символов
5. ввод менее 2 цифр
6. ввод более 2 цифр
7. ввод только пробелов.

*Ожидаемый результат:* Поле «Месяц» подсвечивается красным цветом, сообщение об ошибке: «Неверно указан срок действия карты». Ввод некорректных символов недоступен.

**9. Валидация поля "Год"**

Шаги по воспроизведению:
1. Поля формы "номер карты", "месяц", "Владелец", "cvc" заполняем валидными данными
2. пустое поле
3. ввод букв
4. ввод некорректных символов
5. ввод менее 2 цифр
6. ввод более 2 цифр,
7. ввод цифр не входящих в валидный диапазон (текущий год + 5 лет)
8. ввод только пробелов.

*Ожидаемый результат:* Поле «Год» подсвечивается красным цветом, сообщение об ошибке: «Неверно указан срок действия карты». Ввод некорректных символов недоступен.

**10. Валидация поля "Владелец**

Шаги по воспроизведению:
1. Поля формы "номер карты", "месяц", "год", "cvc" заполняем валидными данными
2. ввод букв на кириллице
3. некорректные символы
4. имя из 1 буквы
5. цифры в имени,
6. ввод только пробелов
7. ввод только имени
8. ввод только фамилии

*Ожидаемый результат:* Поле «Владелец» подсвечивается красным цветом, сообщение об ошибке: «Поле обязательно для заполнения». Ввод некорректных символов недоступен.

**11. Валидация поля "CVC/CVV"**

Шаги по воспроизведению:
1. Поля формы "номер карты", "месяц", "год", "Владелец" заполняем валидными данными
2. пустое поле
3. ввод букв
4. ввод некорректных символов
5. ввод менее 3 цифр
6. ввод более 3 цифр
7. ввод только пробелов

*Ожидаемый результат:* Поле «CVC/CVV» подсвечивается красным цветом, сообщение об ошибке: «Неверный формат». Ввод некорректных символов недоступен.


## Перечень используемых инструментов с обоснованием выбора

+ *Java 8* - язык написания авто-тестов, наиболее надежная версия
+ *Gradle* - система автоматизации сборки и управления зависимостями
+ *JUnit* — платформа для написания авто-тестов и их запуска
+ *Selenide* - фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver, более удобный и простой в использовании, чем Selenium
+ *Docker Compose* - инструмент, позволяющий запускать мультиконтейнерные приложения, чтобы не устанавливать на компьютер необходимые для работы приложения Node.js и СУБД
+ *Allure* - фреймворк, предназначенный для создания отчетов, более наглядных, чем у Gradle

## Перечень и описание возможных рисков при автоматизации

- проблемы из-за необходимости поддержки двух СУБД (MySQL, Postgres);
- отсутствиу ТЗ и какой-либо документации;
- из-за отличия реальной системы и реальных данных автоматизация тестирования может оказаться бесполезной
- использование сторонних библиотек и фреймворков увеличивает риск возникновения технических проблем
- отсутствие test_id усложняет написание и поддержку тестов


## Интервальная оценка с учётом рисков (в часах)

Разработка плана тестирования - 10 часов;

Подготовка необходимых инструментов, написание кода автотестов - 60-120 часов;

Подготовка отчетной документации, баг-репортов - 22 часа;

Запас в виде 24 часов на непредвиденные обстоятельства.

## План сдачи работ

*План* - 24.07.2022

*Автоматизация* - 28.07.2022

*Подготовка отчетных документов* - 04.08.2022